<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content><title>Ubuntuç¼–è¯‘Androidæºç  | å†·æš–è‡ªçŸ¥</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.4.5"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Ubuntuç¼–è¯‘Androidæºç </h1><a id="logo" href="/.">å†·æš–è‡ªçŸ¥</a><p class="description">ä¸»åŠ¨ä½¿ä½ æŒæ§,è¢«åŠ¨ä½¿ä½ æ²‰è¿·</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Ubuntuç¼–è¯‘Androidæºç </h1><div class="post-meta">Jun 14, 2018<span> | </span><span class="category"><a href="/categories/Androidæºç /">Androidæºç </a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> é˜…è¯»</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.5k</span><span class="post-meta-item-text"> å­—</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 6</span><span class="post-meta-item-text"> åˆ†é’Ÿ</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">æ–‡ç« ç›®å½•</div><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#å®‰è£…Ubuntu"><span class="toc-number">1.</span> <span class="toc-text">å®‰è£…Ubuntu</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#é…ç½®ç¯å¢ƒ"><span class="toc-number">2.</span> <span class="toc-text">é…ç½®ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ä¸‹è½½æºç "><span class="toc-number">3.</span> <span class="toc-text">ä¸‹è½½æºç </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ä¸‹è½½é©±åŠ¨"><span class="toc-number">4.</span> <span class="toc-text">ä¸‹è½½é©±åŠ¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç¼–è¯‘"><span class="toc-number">5.</span> <span class="toc-text">ç¼–è¯‘</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#é©±åŠ¨è®¾ç½®"><span class="toc-number">5.1.</span> <span class="toc-text">é©±åŠ¨è®¾ç½®</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#æ­£å¼ç¼–è¯‘"><span class="toc-number">5.2.</span> <span class="toc-text">æ­£å¼ç¼–è¯‘</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#åˆ·æœº"><span class="toc-number">6.</span> <span class="toc-text">åˆ·æœº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#é”™è¯¯"><span class="toc-number">7.</span> <span class="toc-text">é”™è¯¯</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Building-Android-from-sources-unsupported-reloc-43"><span class="toc-number">7.1.</span> <span class="toc-text">Building Android from sources: unsupported reloc 43</span></a></li></ol></li></ol></div></div><div class="post-content"><h4 id="å®‰è£…Ubuntu"><a href="#å®‰è£…Ubuntu" class="headerlink" title="å®‰è£…Ubuntu"></a>å®‰è£…Ubuntu</h4><ul>
<li>ä¸å¥½æ„æ€,è‡ªè¡Œç™¾åº¦</li>
<li>åæ­£æœ€å¥½åˆ†ä¸ª 150Gä»¥ä¸Šï¼Œç„¶åå†…å­˜èµ·ç  4G</li>
</ul>
<hr>
<h4 id="é…ç½®ç¯å¢ƒ"><a href="#é…ç½®ç¯å¢ƒ" class="headerlink" title="é…ç½®ç¯å¢ƒ"></a>é…ç½®ç¯å¢ƒ</h4><ul>
<li><p>ä¸€èˆ¬é»˜è®¤ python ç‰ˆæœ¬æ˜¯ 2.xçš„ï¼Œæ‰€ä»¥3.xæ˜¯ä¼šæŠ¥é”™</p>
</li>
<li><p>Android6çš„è¯ ,ç›´æ¥å®‰è£…openjdk7ï¼Œå…¶ä»–çš„è¯ï¼ŒæŸ¥çœ‹ä¸‹é¢çš„ç¼–è¯‘ç¯å¢ƒé…ç½®å’Œç¼–è¯‘è¦æ±‚</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//ä¸å­˜åœ¨åˆ™å®‰è£…</span><br><span class="line">sudo apt-get install openjdk-7-jdk</span><br><span class="line">// æ‰¾åˆ°å¯¹åº”è·¯å¾„ï¼Œé…ç½®ç¯å¢ƒ</span><br><span class="line">echo export JAVA_HOME="/usr/lib/jvm/java-7-openjdk-amd64/" &gt;&gt; ~/.bashrc</span><br><span class="line">// ç”Ÿæ•ˆ</span><br><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>
</li>
<li><p>git </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br><span class="line">git config --global user.name "Githubçš„åå­—" </span><br><span class="line">git config --global user.email "Githubçš„Email"</span><br></pre></td></tr></table></figure>


</li>
</ul>
<ul>
<li><p><a href="https://blog.csdn.net/carina_cao/article/details/91376042">ä¿®æ”¹æ¸…åé•œåƒæº</a>  (å¦åˆ™å®‰è£…ä¾èµ–ä¼šæœ‰é—®é¢˜)</p>
</li>
<li><p>å®‰è£…ä¾èµ–</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y git flex bison gperf build-essential libncurses5-dev:i386 \</span><br><span class="line">libx11-dev:i386 libreadline6-dev:i386 libgl1-mesa-dev g++-multilib \</span><br><span class="line">tofrodos python-markdown libxml2-utils xsltproc zlib1g-dev:i386 \</span><br><span class="line">dpkg-dev libsdl1.2-dev libesd0-dev \</span><br><span class="line">git-core gnupg flex bison gperf build-essential  \</span><br><span class="line">zip curl zlib1g-dev gcc-multilib g++-multilib \</span><br><span class="line">libc6-dev-i386 \</span><br><span class="line">lib32ncurses5-dev x11proto-core-dev libx11-dev \</span><br><span class="line">lib32z-dev ccache \</span><br><span class="line">libgl1-mesa-dev libxml2-utils xsltproc unzip m4</span><br></pre></td></tr></table></figure>


</li>
</ul>
<hr>
<h4 id="ä¸‹è½½æºç "><a href="#ä¸‹è½½æºç " class="headerlink" title="ä¸‹è½½æºç "></a>ä¸‹è½½æºç </h4><ul>
<li><p><a href="https://lug.ustc.edu.cn/wiki/mirrors/help/aosp#%E5%88%9D%E5%A7%8B%E5%90%8C%E6%AD%A5%E6%96%B9%E6%B3%951">åˆå§‹åŒ–æºç ç¯å¢ƒ</a></p>
</li>
<li><p>é¦–å…ˆä¸‹è½½ repo å·¥å…·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/bin</span><br><span class="line">PATH=~/bin:$PATH</span><br><span class="line">curl https://storage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo</span><br><span class="line">å¦‚æœä¸Šè¿° URL ä¸å¯è®¿é—®ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ï¼š</span><br><span class="line">curl -sSL  &apos;https://gerrit-googlesource.proxy.ustclug.org/git-repo/+/master/repo?format=TEXT&apos; |base64 -d &gt; ~/bin/repo</span><br><span class="line">chmod a+x ~/bin/repo</span><br></pre></td></tr></table></figure>


</li>
</ul>
<ul>
<li><p>ç„¶åå»ºç«‹ä¸€ä¸ªå·¥ä½œç›®å½•ï¼ˆåå­—ä»»æ„ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir WORKING_DIRECTORY</span><br><span class="line">cd WORKING_DIRECTORY</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆå§‹åŒ–ä»“åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">repo init -u git://mirrors.ustc.edu.cn/aosp/platform/manifest</span><br><span class="line">å¦‚æœæç¤ºæ— æ³•è¿æ¥åˆ° gerrit.googlesource.comï¼Œå¯ä»¥ç¼–è¾‘ ~/bin/repoï¼ŒæŠŠ REPO_URL ä¸€è¡Œæ›¿æ¢æˆä¸‹é¢çš„ï¼š</span><br><span class="line"> REPO_URL = &apos;https://gerrit-googlesource.proxy.ustclug.org/git-repo&apos;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¦‚æœéœ€è¦æŸä¸ªç‰¹å®šçš„<code>Android ç‰ˆæœ¬åˆ†æ”¯</code> ï¼ˆ<a href="https://source.android.com/source/build-numbers.html#source-code-tags-and-builds">Android ç‰ˆæœ¬åˆ—è¡¨</a>ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repo init -u git://mirrors.ustc.edu.cn/aosp/platform/manifest -b android-4.0.1_r1(æ¯”å¦‚4.0)</span><br></pre></td></tr></table></figure>
</li>
<li><p>åŒæ­¥æºç æ ‘ï¼ˆä»¥ååªéœ€æ‰§è¡Œè¿™æ¡å‘½ä»¤æ¥åŒæ­¥ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repo sync</span><br></pre></td></tr></table></figure>

</li>
</ul>
<hr>
<ul>
<li>ç‰ˆæœ¬åˆ†æ”¯å¾ˆé‡è¦,åˆ«å¿˜äº†!!!<ul>
<li>å®åœ¨ä¸è¡Œ,ä½ å°±æŠŠæºç ç›®å½•å†™æˆåˆ†æ”¯åå­—ï¼Œå› ä¸ºä½ è¦æ ¹æ®è¿™ä¸ª <strong>åˆ†æ”¯åå­—</strong> è·å– <strong>ç»†åˆ†ç‰ˆæœ¬å·</strong></li>
<li>æ ¹æ® <strong>ç»†åˆ†ç‰ˆæœ¬å·</strong> æ‰èƒ½ä¸‹è½½åˆ°å¯¹åº”çš„é©±åŠ¨æ–‡ä»¶<br>![ç»†åˆ†ç‰ˆæœ¬å·](ç»†åˆ†ç‰ˆæœ¬å·.png</li>
</ul>
</li>
</ul>
<h4 id="ä¸‹è½½é©±åŠ¨"><a href="#ä¸‹è½½é©±åŠ¨" class="headerlink" title="ä¸‹è½½é©±åŠ¨"></a>ä¸‹è½½é©±åŠ¨</h4><ul>
<li>ä¸‹è½½é©±åŠ¨ï¼ï¼ï¼ æ²¡æœ‰è¿™ä¸ªä½ æ˜¯æ²¡æ³•å¼€æœºçš„ï¼Œä¼šä¸€ç›´åœ¨ Google è¿™ä¸ªlogoæ— æ³•å¼€æœºã€‚<ul>
<li><a href="https://developers.google.com/android/drivers">é©±åŠ¨é“¾æ¥</a> <ul>
<li>æ‰¾åˆ°ä½  <strong>å¯¹åº”çš„æ‰‹æœºæœºå‹</strong>ï¼Œæ ¹æ®ä¸Šé¢çš„ <strong>ç»†åˆ†ç‰ˆæœ¬å·</strong> ä¸‹è½½é©±åŠ¨ - ä¸¤ä¸ªæˆ–è€…ä¸‰ä¸ªï¼Œéƒ½ä¸‹è½½ä¸‹æ¥ã€‚<br><img src="%E5%AF%B9%E5%BA%94%E9%A9%B1%E5%8A%A8.png" alt="å¯¹åº”é©±åŠ¨"></li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h4 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h4><h5 id="é©±åŠ¨è®¾ç½®"><a href="#é©±åŠ¨è®¾ç½®" class="headerlink" title="é©±åŠ¨è®¾ç½®"></a>é©±åŠ¨è®¾ç½®</h5><ul>
<li><p>è¿™æ—¶å€™ä½ å·²ç»ä¸‹è½½å®Œäº†æŠŠï¼ŒæŠŠåˆšåˆš<strong>ä¸‹è½½çš„é©±åŠ¨è§£å‹åˆ°æºç ç›®å½•ä¸‹</strong>ã€‚</p>
<ul>
<li>ä¼šæ˜¯å¤šä¸ª.shæ–‡ä»¶ <strong>åƒè¿™æ ·</strong>ï¼š<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">extract-lge-hammerhead.sh </span><br><span class="line">extract-broadcom-hammerhead.sh</span><br><span class="line">extract-qcom-hammerhead.sh</span><br></pre></td></tr></table></figure>


</li>
</ul>
</li>
</ul>
<ul>
<li><p>æºç ç›®å½•ä¸‹æ‰§è¡Œ .sh æ–‡ä»¶ã€‚ </p>
</li>
<li><p>åƒè¿™æ · <code>./extract-lge-hammerhead.sh</code></p>
<ul>
<li><p>ç„¶åå°±å‡ºç°ä¸€å †è‹±æ–‡ï¼Œä¸è¦ç®¡å®ƒã€‚ç›´æ¥ <strong>æŒ‰Enterä¸€è·¯å‘ä¸‹ï¼Œç›´åˆ°ä½ çœ‹åˆ°ç¬¬8æ¡</strong>ï¼Œç„¶åæ³¨æ„ ç»§ç»­Enterï¼Œæœ€åä¼šæœ‰ä¸€ä¸ªä»€ä¹ˆä»€ä¹ˆçš„ï¼Œ<strong>éœ€è¦ä½ è¾“å…¥ I ACCEPT</strong>ï¼Œä¸€å®šè¦å…¨éƒ¨å¤§å†™ï¼Œä¸ç„¶å†æ‰§è¡Œä¸€è¾¹å‘—ã€‚</p>
</li>
<li><p>ä¸‰ä¸ªéƒ½è¦è¿™æ ·æ“ä½œ - è¿™æ—¶å€™ï¼Œæºç è·¯å¾„ä¸‹å°±ä¼šæœ‰ä¸€ä¸ª <strong>vendor</strong> çš„æ–‡ä»¶å¤¹- ç„¶åå¼€å§‹ç¼–è¯‘äº† ï¼Œå¦‚æœä½ ç¯å¢ƒé…ç½®æ­£ç¡®ã€‚</p>
<h5 id="æ­£å¼ç¼–è¯‘"><a href="#æ­£å¼ç¼–è¯‘" class="headerlink" title="æ­£å¼ç¼–è¯‘"></a>æ­£å¼ç¼–è¯‘</h5></li>
<li><p><a href="https://source.android.com/setup/initializing#installing-required-packages-ubuntu-1404">Linuxç¼–è¯‘ç¯å¢ƒé…ç½®</a></p>
</li>
<li><p><a href="https://source.android.com/setup/requirements">ç¼–è¯‘è¦æ±‚</a></p>
</li>
<li><p>è¿™é‡Œä¼šå‘Šè¯‰ä½ å“ªä¸ªAndroidç‰ˆæœ¬éœ€è¦å“ªä¸ªjdkç‰ˆæœ¬ - åœ¨Ubuntu 14.04 64ä½çš„åŸºç¡€ä¸Šï¼Œç¼–è¯‘4.4å’Œ6.0å®é™…ä¸Šåªæ˜¯ä¸€ä¸ªä½¿ç”¨jdk6ä¸€ä¸ªä½¿ç”¨openjdk7çš„åŒºåˆ«ã€‚èµ·ç åœ¨æˆ‘è‡ªå·±ç¼–è¯‘çš„æ—¶å€™æ˜¯è¿™æ ·å­</p>
</li>
<li><p>è¿˜æœ‰å°±æ˜¯å¦‚æœå¼€å§‹ç¼–è¯‘6.0 ä½¿ç”¨çš„ apt-get install openjdk7ï¼Œåé¢ä½ åˆæ‰“ç®—ç¼–è¯‘4.4ã€‚é‚£ä¹ˆåœ¨ä½ å®‰è£…jdk1.6.0_xxx.binçš„æ—¶å€™ï¼Œè®°å¾—apt-get remove openjdk-7-jre ä»€ä¹ˆçš„ï¼Œæœ‰ä¸‰ä¸ªåæ­£ä¸çŸ¥é“å•¥ä½ å°± tab é”®ï¼Œå¦åˆ™ jdk-version ä¸€ç›´æ˜¯1.7ï¼Œå°±ç®—ä½ ä¿®æ”¹äº† /erc/profile è¿˜æ˜¯ ~/.bashrc å®˜æ–¹è¯´æ˜¯Android7-8ä½¿ç”¨<strong>openjdk8</strong>ï¼Œ5-6ä½¿ç”¨<strong>openjdk7</strong>,2.3-4.4ä½¿ç”¨<strong>jdk6</strong> - ç¼–è¯‘å‰é…ç½®  </p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>ç¼–è¯‘ä¼˜åŒ–</p>
<ul>
<li><p>åœ¨ .bashrcæ–‡ä»¶ä¸­æ·»åŠ </p>
<p><code>echo export USE_CCACE=1 &gt;&gt; ~/.bashrc</code></p>
<ul>
<li>ä¸ºäº†æé«˜ç¼–è¯‘æ•ˆç‡ï¼Œè®¾ç½®ç¼–è¯‘å™¨é«˜é€Ÿç¼“å­˜ï¼Œå¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š <ul>
<li>prebuilts/misc/linux-x86/ccache/ccache -M 30G  ï¼ˆå¦‚æœç³»ç»Ÿæ²¡æœ‰çš„è¯ï¼Œå¥½åƒæ˜¯sdkè¿˜æ˜¯ndké‡Œé¢æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œéƒ½æ²¡æœ‰å°±ç®—äº†å§ğŸ¤”ï¼‰</li>
<li>è¿™ä¸ª 30G æ ¹æ®è‡ªå·±çš„ç¡¬ç›˜ç©ºé—´å¤§å°ç»§ç»­è°ƒæ•´ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>å¼€å§‹ç¼–è¯‘</p>
<ul>
<li><p>æºç è·¯å¾„ä¸‹ </p>
</li>
<li><p>source . build/envsetup.sh </p>
</li>
</ul>
<ul>
<li><p>lunch </p>
</li>
<li><p>make -j4 æˆ–è€… make -j8 æˆ–è€… make -j16,çœ‹ä½ é…ç½®äº†</p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><p>å…³äº  <strong>lunch</strong>   æ¯”å¦‚æˆ‘æ˜¯Nexus5ï¼Œæ‰€ä»¥é€‰æ‹© 19</p>
<ul>
<li>aosp_hammerhead_userdebug  <img src="%E5%AF%B9%E5%BA%94%E9%95%9C%E5%83%8F%E7%BC%96%E5%8F%B7.png" alt="image"><br><img src="%E5%90%8E%E7%BC%80%E5%8C%BA%E5%88%86.png" alt="image"></li>
</ul>
<ul>
<li>user ç”¨äºæ­£å¼äº§å“ </li>
</ul>
</li>
<li><p>userdebug å’Œuserç±»ä¼¼ï¼Œä½†æ˜¯æœ‰rootæƒé™ï¼Œå¹¶ä¸”å¯ä»¥è°ƒè¯•ï¼Œä¸»è¦ç”¨äºè°ƒè¯•</p>
<ul>
<li>eng å¼€å‘ç”¨çš„é€‰é¡¹ï¼Œé…æœ‰é¢å¤–çš„è°ƒè¯•å·¥å…·ã€‚</li>
<li>å¦‚æœç¼–è¯‘ååªåœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œï¼Œåˆ™lunchåå¯ä»¥å°±ç›´æ¥è¾“å…¥ï¼š1</li>
<li><strong><a href="https://source.android.com/source/running">ç‰¹å®šè®¾å¤‡ä¸Šè¿è¡Œç¼–è¯‘ç³»ç»Ÿçš„è¯¦ç»†ä¿¡æ¯ </a></strong></li>
</ul>
</li>
<li><p>æˆ‘æ˜¯ä¸¤ä¸‰ä¸ªå°æ—¶ç›´æ¥ç¼–è¯‘æˆåŠŸï¼Œçœ‹é…ç½®å’Œäººå“å§ï¼Œå•Šå“ˆå“ˆå“ˆå“ˆã€‚</p>
</li>
</ul>
<hr>
<h4 id="åˆ·æœº"><a href="#åˆ·æœº" class="headerlink" title="åˆ·æœº"></a>åˆ·æœº</h4><ul>
<li><p>sudo adb reboot bootloader</p>
<ul>
<li><p>è¿™ä¸ªæ—¶å€™å¯èƒ½adb devices ä½ ä¼šå‘ç°æ‰¾ä¸åˆ°è®¾å¤‡</p>
</li>
<li><p>å¦‚æœæ˜¯è™šæ‹Ÿæœºçš„è¯ï¼Œç‚¹å¼€ä¸Šé¢é‚£ä¸ª <strong>è™šæ‹Ÿæœº</strong> é€‰é¡¹ï¼Œ<strong>å¯ç§»åŠ¨è®¾å¤‡</strong></p>
</li>
<li><p>ç„¶å <strong>è¿æ¥</strong></p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>å¯ä»¥æ‰§è¡Œä¸‹è§£é”å‘½ä»¤</p>
<ul>
<li>fastboot oem unlock </li>
</ul>
</li>
<li><p>fastboot -w flashall </p>
</li>
<li><p>ç„¶åå°±ä¼šè‡ªåŠ¨é‡å¯ï¼Œå¼€æœºã€‚</p>
</li>
</ul>
<hr>
<p> <img src="%E5%A4%B1%E8%B4%A5.jpg" alt="å¤±è´¥"></p>
<hr>
<h4 id="é”™è¯¯"><a href="#é”™è¯¯" class="headerlink" title="é”™è¯¯"></a>é”™è¯¯</h4><h5 id="Building-Android-from-sources-unsupported-reloc-43"><a href="#Building-Android-from-sources-unsupported-reloc-43" class="headerlink" title="Building Android from sources: unsupported reloc 43"></a>Building Android from sources: unsupported reloc 43</h5><ul>
<li><p>Ubuntu16.04  64ä½ç¼–è¯‘ï¼•.1æ—¶å€™å‡ºç°çš„ä¸€ä¸ªé—®é¢˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">libnativehelper/JniInvocation.cpp:165: error: unsupported reloc 43</span><br><span class="line">libnativehelper/JniInvocation.cpp:165: error: unsupported reloc 43</span><br><span class="line">libnativehelper/JniInvocation.cpp:165: error: unsupported reloc 43</span><br><span class="line">libnativehelper/JniInvocation.cpp:165: error: unsupported reloc 43</span><br><span class="line">clang: error: linker command failed with exit code 1 (use -v to see invocation)</span><br><span class="line">build/core/host_shared_library_internal.mk:44: recipe for target &apos;out/host/linux-x86/obj32/lib/libnativehelper.so&apos; failed</span><br><span class="line">make: *** [out/host/linux-x86/obj32/lib/libnativehelper.so] Error 1</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>è§£å†³æ–¹æ³•<br>  æ–¹æ³•ä¸€ï¼šã€€æºç ç›®å½•/art/build/Android.common_build.mk<br>      <figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Host.</span></span><br><span class="line">ART_HOST_CLANG := false</span><br><span class="line"><span class="keyword">ifneq</span> (<span class="variable">$(WITHOUT_HOST_CLANG)</span>,true)</span><br><span class="line">  <span class="comment"># By default, host builds use clang for better warnings.</span></span><br><span class="line">  ART_HOST_CLANG := true</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹æˆ ifeq ($(WITHOUT_HOST_CLANG),false)ã€€</span></span><br><span class="line"><span class="comment"># ä½†æ˜¯å¯¹æˆ‘çš„é—®é¢˜æ²¡æœ‰åµç”¨</span></span><br><span class="line"><span class="comment"># Host.</span></span><br><span class="line">ART_HOST_CLANG := false</span><br><span class="line"><span class="keyword">ifeq</span> (<span class="variable">$(WITHOUT_HOST_CLANG)</span>,false)ã€€</span><br><span class="line">  <span class="comment"># By default, host builds use clang for better warnings.</span></span><br><span class="line">  ART_HOST_CLANG := true</span><br><span class="line"><span class="keyword">endif</span></span><br></pre></td></tr></table></figure></p>
<p>æ–¹æ³•äºŒ:<br>      cp /usr/bin/ld.gold   æºç ç›®å½•/prebuilts/gcc/linux-x86/host/x86_64-linux-glibc2.11-4.6/x86_64-linux/bin/ld</p>
<ul>
<li>åŸæ–‡é“¾æ¥ã€€<a href="https://stackoverflow.com/questions/36048358/building-android-from-sources-unsupported-reloc-43">Building Android from sources: unsupported reloc 43</a></li>
</ul>
</div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>å†·æš–è‡ªçŸ¥</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="/posts/48985/">https://www.wl960127.top/posts/48985/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬ç«™å†…å®¹å‡ä¸ºä¸ªäººå­¦ä¹ ç¬”è®°,ä¸æ¶‰åŠå•†ä¸šç”¨é€”ï¼Œä»…æä¾›å­¦ä¹ å‚è€ƒ,ç¬¬ä¸‰æ–¹æ‘˜å½•å·²ç½²åé“¾æ¥,æœªç½²åè¯·è¯„è®ºæ·»åŠ ,è½¬è½½ç½²åæ¥æºå³å¯ã€‚</li></ul></div><br><script type="text/javascript" src="/js/share.js?v=1.4.5" async></script><a class="article-share-link" data-url="https://www.wl960127.top/posts/48985/" data-id="ckw7l7fjb003tyooimbye2w79" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAACuCAAAAACKZ2kyAAABwklEQVR42u3aSY7DMAwEwPz/054HZCI1JYsxgtIpCLyUfWjQpF6veF1v6/3/8ZGfrvk6sXBxcbe513B9YlVvmV9/8sC4uLiN3HHQjH+PY2tMzA24uLhP5pajZ1gM4eLi/h43ibakPMLFxX0mN/k4WWt8JOce+VbDxcXd4OZNjXO/j/R3cXFxl7hXca09WN4umdwdFxe3hZsHSvUDplr6FI7ExcVt4VZjpXpWlRsFKC4u7jFu3qbc2aKRt0iiigwXF/cwt7plan8Qm7yUyZVxcXEPc+8iVouh5DX9cxYuLu6XuMlt8pBKRraFIS4uLm4Ld609mhQr1e0XSZGEi4vbw90ZsibfVdVzxw+Ji4vbyc0DaGfT1Q10XFzcFm5ejuwMRdaGrJNtHLi4uIe5SeshKWKS+BvfK3pluLi47dy8kbEWWztDF1xc3Cdwz6Hz0IwyFRcX91bufsO0Gl75mBYXF/db3HxVx6X5NatjWlxc3B5uEl55g2OnPIpCEBcXt5G7HzR5e6UacLi4uM/nVhus1YgsVEa4uLiP4RZCZ2lzxkSIi4vbyE3iZq2gqX4mTV4WLi5uC7ccJUtd2J0Iw8XFbeT+AaadPw3P87mKAAAAAElFTkSuQmCC">åˆ†äº«</a><div class="tags"><a href="/tags/æºç /">æºç </a><a href="/tags/Ubuntu/">Ubuntu</a></div><div class="post-nav"><a class="pre" href="/posts/34068/">QQå¼¹çª—æ¶ˆæ¯</a><a class="next" href="/posts/18711/">Txtæœ¬åœ°é˜…è¯»å™¨</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">é˜…è¯»è¯„è®ºï¼ˆè¯·ç¡®ä¿ Disqus å¯ä»¥æ­£å¸¸åŠ è½½ï¼‰</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'https://www.wl960127.top/posts/48985/';
    this.page.identifier = 'posts/48985/';
    this.page.title = 'Ubuntuç¼–è¯‘Androidæºç ';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//wuwangdaren.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//wuwangdaren.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://wuwangdaren.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div><div id="lv-container" data-id="city" data-uid="MTAyMC8zMzgyMC8xMDM3Mw=="><script>(function(d, s) {
   var j, e = d.getElementsByTagName(s)[0];
   if (typeof LivereTower === 'function') { return; }
   j = d.createElement(s);
   j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
   j.async = true;
   e.parentNode.insertBefore(j, e);
})(document, 'script');
</script></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Androidæºç /">Androidæºç </a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/">Flutter</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ubuntu/">Ubuntu</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯æ‚è°ˆ/">æŠ€æœ¯æ‚è°ˆ</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æ“ä½œç³»ç»Ÿ/">æ“ä½œç³»ç»Ÿ</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/è®¾è®¡æ¨¡å¼/">è®¾è®¡æ¨¡å¼</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/è¯»ä¹¦ç¬”è®°/">è¯»ä¹¦ç¬”è®°</a><span class="category-list-count">7</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/æºç /" style="font-size: 23px; color: #00d6ff">æºç </a> <a href="/tags/å¾…å®Œæˆ/" style="font-size: 19.67px; color: #20b3d2">å¾…å®Œæˆ</a> <a href="/tags/åŠŸèƒ½å®ç°/" style="font-size: 21.33px; color: #10c5e9">åŠŸèƒ½å®ç°</a> <a href="/tags/binder/" style="font-size: 18px; color: #30a2bc">binder</a> <a href="/tags/MQTT/" style="font-size: 14.67px; color: #507f8f">MQTT</a> <a href="/tags/å·¥å…·/" style="font-size: 14.67px; color: #507f8f">å·¥å…·</a> <a href="/tags/FFmpeg/" style="font-size: 16.33px; color: #4091a6">FFmpeg</a> <a href="/tags/Flutter/" style="font-size: 16.33px; color: #4091a6">Flutter</a> <a href="/tags/Hexo/" style="font-size: 13px; color: #606e79">Hexo</a> <a href="/tags/çŸ¥è¯†ç‚¹/" style="font-size: 16.33px; color: #4091a6">çŸ¥è¯†ç‚¹</a> <a href="/tags/Jvm/" style="font-size: 16.33px; color: #4091a6">Jvm</a> <a href="/tags/Compose/" style="font-size: 13px; color: #606e79">Compose</a> <a href="/tags/Ubuntu/" style="font-size: 18px; color: #30a2bc">Ubuntu</a> <a href="/tags/WebRTC/" style="font-size: 13px; color: #606e79">WebRTC</a> <a href="/tags/Dart/" style="font-size: 13px; color: #606e79">Dart</a> <a href="/tags/Http/" style="font-size: 13px; color: #606e79">Http</a> <a href="/tags/å¼€æºæ¡†æ¶/" style="font-size: 13px; color: #606e79">å¼€æºæ¡†æ¶</a> <a href="/tags/å†…æ ¸/" style="font-size: 14.67px; color: #507f8f">å†…æ ¸</a> <a href="/tags/æŠ€æœ¯æ‚è°ˆ/" style="font-size: 16.33px; color: #4091a6">æŠ€æœ¯æ‚è°ˆ</a> <a href="/tags/Framework/" style="font-size: 13px; color: #606e79">Framework</a> <a href="/tags/æ˜æœ/" style="font-size: 13px; color: #606e79">æ˜æœ</a> <a href="/tags/Jni/" style="font-size: 16.33px; color: #4091a6">Jni</a> <a href="/tags/ç»„ä»¶åŒ–/" style="font-size: 13px; color: #606e79">ç»„ä»¶åŒ–</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/posts/40b4dd29/">2021è¯»ä¹¦è®°å½•</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/2218b608/">IOä¸Socketç®€å•ç¬”è®°</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/69f1c3a4/">Flutterä¸­çš„Widget</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/8d8888c5/">Flutterä¸­çš„Key</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/ab760be3/">Jetpackä¸Composeä½¿ç”¨</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/95b53bcb/">å…³äºå­¦ä¹ çš„ç¬¬äº”ç¯‡-å­¦éœ¸å…»æˆ</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/858effef/">å…³äºå­¦ä¹ çš„ç¬¬å››ç¯‡-æ—¶é—´ç®¡ç†</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/cf03b6bc/">å…³äºå­¦ä¹ çš„ç¬¬ä¸‰ç¯‡-é«˜åº¦è‡ªå¾‹</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/2726a13e/">å…³äºå­¦ä¹ çš„ç¬¬äºŒç¯‡-é«˜æ•ˆå­¦ä¹ </a></li><li class="post-list-item"><a class="post-list-link" href="/posts/7ae29eec/">å…³äºå­¦ä¹ çš„ç¬¬ä¸€ç¯‡-åº•å±‚æ€ç»´</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="https://qkmin.github.io" title="æŸåº·çš„åšå®¢" target="_blank">æŸåº·çš„åšå®¢</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2021 <a href="/." rel="nofollow">å†·æš–è‡ªçŸ¥</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.4.5" async></script><script type="text/javascript" id="maid-script" src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js?v=1.4.5"></script><script>if (window.mermaid) {
  var options = JSON.parse(document.getElementById('maid-script').getAttribute('mermaidoptioins'));
  mermaid.initialize(options);
}

</script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.4.5" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=1.4.5"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');

</script><script type="text/javascript" color="100,99,98" opacity="0.7" zindex="-1" count="150" src="//lib.baomitu.com/canvas-nest.js/2.0.3/canvas-nest.umd.js"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.4.5"></script><script type="text/javascript" src="/js/smartresize.js?v=1.4.5"></script></div></body></html>